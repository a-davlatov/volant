"use strict";function formValidation(e){const o=e.querySelector(".error");o.style.display="none",o.textContent="";const t=e.querySelector(".name"),l=e.querySelector(".phone");t.style.borderColor="rgba(255, 255, 255, .40)",l.style.borderColor="rgba(255, 255, 255, .40)";const s=t.value.trim(),r=l.value.trim(),c=e.querySelector(".form__checkbox");return""===s?(o.textContent="Заполните поле имя",o.style.display="block",t.style.borderColor="rgb(199, 43, 43)",t.focus(),!1):""===r?(o.textContent="Заполните поле телефон",o.style.display="block",l.style.borderColor="rgb(199, 43, 43)",l.focus(),!1):!!c.checked||(o.textContent="Пожалуйста, дайте согласие на обработку ваших персональных данных",o.style.display="block",c.focus(),!1)}let lastScroll=0;const headerEl=document.querySelector("#header"),introEl=document.querySelector("#intro"),burgerEl=document.querySelector("#burger"),modalEls=document.querySelectorAll(".modal"),modalCloseEls=document.querySelectorAll(".modal__close"),formEls=document.querySelectorAll(".form"),bodyEl=document.body;let introElH=introEl.clientHeight;const defaultOffset=introElH,scrollPosition=()=>window.pageXOffset||document.documentElement.scrollTop,containHide=()=>headerEl.classList.contains("hide");window.addEventListener("scroll",()=>{scrollPosition()>lastScroll&&!containHide()&&scrollPosition()>defaultOffset?headerEl.classList.add("hide"):scrollPosition()<lastScroll&&containHide()?(headerEl.classList.remove("hide"),headerEl.classList.add("fixed")):scrollPosition()<defaultOffset&&headerEl.classList.remove("fixed"),lastScroll=scrollPosition()}),burgerEl.addEventListener("click",e=>{e.preventDefault(),burgerEl.classList.toggle("clicked"),headerEl.classList.toggle("show"),bodyEl.classList.toggle("no-scroll")});const navLinks=document.querySelectorAll("[data-scroll]");navLinks.forEach(e=>{e.addEventListener("click",o=>{o.preventDefault();const t=e.dataset.scroll,l=document.getElementById(t).offsetTop;burgerEl.classList.remove("clicked"),headerEl.classList.remove("show"),bodyEl.classList.remove("no-scroll"),window.innerWidth<=414?window.scrollTo({top:l-56,behavior:"smooth"}):window.scrollTo({top:l,behavior:"smooth"})})});const modalLinks=document.querySelectorAll("[data-modal]");modalLinks.forEach(e=>{e.addEventListener("click",o=>{o.preventDefault();const t=e.dataset.modal,l=document.getElementById(t);l.classList.add("show"),bodyEl.classList.add("no-scroll")})}),modalCloseEls.forEach(e=>{e.addEventListener("click",o=>{e.closest(".modal").classList.remove("show"),bodyEl.classList.remove("no-scroll")})}),modalEls.forEach(e=>{e.addEventListener("click",o=>{e.classList.remove("show"),bodyEl.classList.remove("no-scroll")})}),document.querySelectorAll(".modal__dialog").forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation()})}),window.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.querySelector(".preloader").style.display="none"},1e3)});const wow=new WOW({boxClass:"wow",animateClass:"animate__animated",offset:0,mobile:!1,live:!0});wow.init(),formEls.forEach(e=>{e.addEventListener("submit",async o=>{o.preventDefault();const t=e.querySelector(".message"),l=e.querySelector(".btn"),s=e.querySelectorAll("input"),r=formValidation(e);r&&(l.disabled=!0,s.forEach(e=>e.setAttribute("disabled","disabled")),await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:new FormData(e)}).then(()=>{e.reset(),t.style.display="block",l.disabled=!1,s.forEach(e=>e.removeAttribute("disabled")),setTimeout(()=>{t.style.display="none"},3e3)}).catch(e=>{throw e}))})});